import{e as h}from"./react-router-CRup_Xac.js";const A=e=>{let s;const t=new Set,n=(d,a)=>{const p=typeof d=="function"?d(s):d;if(!Object.is(p,s)){const g=s;s=a??(typeof p!="object"||p===null)?p:Object.assign({},s,p),t.forEach(m=>m(s,g))}},o=()=>s,c={setState:n,getState:o,getInitialState:()=>S,subscribe:d=>(t.add(d),()=>t.delete(d))},S=s=e(n,o,c);return c},D=(e=>e?A(e):A),N=e=>e;function L(e,s=N){const t=h.useSyncExternalStore(e.subscribe,h.useCallback(()=>s(e.getState()),[e,s]),h.useCallback(()=>s(e.getInitialState()),[e,s]));return h.useDebugValue(t),t}const R=e=>{const s=D(e),t=n=>L(s,n);return Object.assign(t,s),t},M=(e=>e?R(e):R),k={BASE_URL:"/Spark-Investment-Frontend/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AI_MODEL:"gpt-4",VITE_API_BASE_URL:"http://localhost:5000/api",VITE_APP_ENVIRONMENT:"development",VITE_APP_NAME:"Spark Investment AI",VITE_APP_VERSION:"1.0.0",VITE_DEBUG_MODE:"true",VITE_ENABLE_AI_SUGGESTIONS:"true",VITE_ENABLE_PAPER_TRADING:"true",VITE_LOG_LEVEL:"info",VITE_MAX_TRADE_AMOUNT:"100000",VITE_MOCK_MODE:"true",VITE_REQUIRE_2FA_FOR_TRADES:"false",VITE_WEBSOCKET_URL:"ws://localhost:5000"},_=new Map,E=e=>{const s=_.get(e);return s?Object.fromEntries(Object.entries(s.stores).map(([t,n])=>[t,n.getState()])):{}},w=(e,s,t)=>{if(e===void 0)return{type:"untracked",connection:s.connect(t)};const n=_.get(t.name);if(n)return{type:"tracked",store:e,...n};const o={connection:s.connect(t),stores:{}};return _.set(t.name,o),{type:"tracked",store:e,...o}},C=(e,s)=>{if(s===void 0)return;const t=_.get(e);t&&(delete t.stores[s],Object.keys(t.stores).length===0&&_.delete(e))},U=e=>{var s,t;if(!e)return;const n=e.split(`
`),o=n.findIndex(v=>v.includes("api.setState"));if(o<0)return;const i=((s=n[o+1])==null?void 0:s.trim())||"";return(t=/.+ (.+) .+/.exec(i))==null?void 0:t[1]},V=(e,s={})=>(t,n,o)=>{const{enabled:i,anonymousActionType:v,store:c,...S}=s;let d;try{d=(i??(k?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return e(t,n,o);const{connection:a,...p}=w(c,d,S);let g=!0;o.setState=((r,f,u)=>{const l=t(r,f);if(!g)return l;const I=u===void 0?{type:v||U(new Error().stack)||"anonymous"}:typeof u=="string"?{type:u}:u;return c===void 0?(a?.send(I,n()),l):(a?.send({...I,type:`${c}/${I.type}`},{...E(S.name),[c]:o.getState()}),l)}),o.devtools={cleanup:()=>{a&&typeof a.unsubscribe=="function"&&a.unsubscribe(),C(S.name,c)}};const m=(...r)=>{const f=g;g=!1,t(...r),g=f},y=e(o.setState,n,o);if(p.type==="untracked"?a?.init(y):(p.stores[p.store]=o,a?.init(Object.fromEntries(Object.entries(p.stores).map(([r,f])=>[r,r===p.store?y:f.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let r=!1;const f=o.dispatch;o.dispatch=(...u)=>{(k?"production":void 0)!=="production"&&u[0].type==="__setState"&&!r&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),r=!0),f(...u)}}return a.subscribe(r=>{var f;switch(r.type){case"ACTION":if(typeof r.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return T(r.payload,u=>{if(u.type==="__setState"){if(c===void 0){m(u.state);return}Object.keys(u.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const l=u.state[c];if(l==null)return;JSON.stringify(o.getState())!==JSON.stringify(l)&&m(l);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(u)});case"DISPATCH":switch(r.payload.type){case"RESET":return m(y),c===void 0?a?.init(o.getState()):a?.init(E(S.name));case"COMMIT":if(c===void 0){a?.init(o.getState());return}return a?.init(E(S.name));case"ROLLBACK":return T(r.state,u=>{if(c===void 0){m(u),a?.init(o.getState());return}m(u[c]),a?.init(E(S.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return T(r.state,u=>{if(c===void 0){m(u);return}JSON.stringify(o.getState())!==JSON.stringify(u[c])&&m(u[c])});case"IMPORT_STATE":{const{nextLiftedState:u}=r.payload,l=(f=u.computedStates.slice(-1)[0])==null?void 0:f.state;if(!l)return;m(c===void 0?l:l[c]),a?.send(null,u);return}case"PAUSE_RECORDING":return g=!g}return}}),y},j=V,T=(e,s)=>{let t;try{t=JSON.parse(e)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}t!==void 0&&s(t)};function F(e,s){let t;try{t=e()}catch{return}return{getItem:o=>{var i;const v=S=>S===null?null:JSON.parse(S,void 0),c=(i=t.getItem(o))!=null?i:null;return c instanceof Promise?c.then(v):v(c)},setItem:(o,i)=>t.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>t.removeItem(o)}}const b=e=>s=>{try{const t=e(s);return t instanceof Promise?t:{then(n){return b(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return b(n)(t)}}}},H=(e,s)=>(t,n,o)=>{let i={storage:F(()=>localStorage),partialize:r=>r,version:0,merge:(r,f)=>({...f,...r}),...s},v=!1;const c=new Set,S=new Set;let d=i.storage;if(!d)return e((...r)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...r)},n,o);const a=()=>{const r=i.partialize({...n()});return d.setItem(i.name,{state:r,version:i.version})},p=o.setState;o.setState=(r,f)=>(p(r,f),a());const g=e((...r)=>(t(...r),a()),n,o);o.getInitialState=()=>g;let m;const y=()=>{var r,f;if(!d)return;v=!1,c.forEach(l=>{var I;return l((I=n())!=null?I:g)});const u=((f=i.onRehydrateStorage)==null?void 0:f.call(i,(r=n())!=null?r:g))||void 0;return b(d.getItem.bind(d))(i.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==i.version){if(i.migrate){const I=i.migrate(l.state,l.version);return I instanceof Promise?I.then(O=>[!0,O]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var I;const[O,P]=l;if(m=i.merge(P,(I=n())!=null?I:g),t(m,!0),O)return a()}).then(()=>{u?.(m,void 0),m=n(),v=!0,S.forEach(l=>l(m))}).catch(l=>{u?.(void 0,l)})};return o.persist={setOptions:r=>{i={...i,...r},r.storage&&(d=r.storage)},clearStorage:()=>{d?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>v,onHydrate:r=>(c.add(r),()=>{c.delete(r)}),onFinishHydration:r=>(S.add(r),()=>{S.delete(r)})},i.skipHydration||y(),m||g},J=H,B=M(j(J((e,s)=>({user:null,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),logout:()=>e({user:null,isAuthenticated:!1}),portfolio:null,portfolioSummary:null,connectedPlatforms:[],setPortfolio:t=>e({portfolio:t}),setPortfolioSummary:t=>e({portfolioSummary:t}),setConnectedPlatforms:t=>e({connectedPlatforms:t}),updatePortfolio:t=>e(n=>({portfolio:{...n.portfolio,...t}})),marketData:{indices:[],topGainers:[],topLosers:[],sectorPerformance:[]},setMarketData:t=>e({marketData:t}),updateMarketIndex:(t,n)=>e(o=>({marketData:{...o.marketData,indices:o.marketData.indices.map(i=>i.symbol===t?{...i,...n}:i)}})),investments:{mutualFunds:[],stocks:[],crypto:[]},setInvestments:t=>e({investments:t}),addInvestment:(t,n)=>e(o=>({investments:{...o.investments,[t]:[...o.investments[t],n]}})),updateInvestment:(t,n,o)=>e(i=>({investments:{...i.investments,[t]:i.investments[t].map(v=>v.id===n?{...v,...o}:v)}})),removeInvestment:(t,n)=>e(o=>({investments:{...o.investments,[t]:o.investments[t].filter(i=>i.id!==n)}})),aiInsights:null,aiRecommendations:[],riskAnalysis:null,setAIInsights:t=>e({aiInsights:t}),setAIRecommendations:t=>e({aiRecommendations:t}),setRiskAnalysis:t=>e({riskAnalysis:t}),pendingOrders:[],tradeHistory:[],setPendingOrders:t=>e({pendingOrders:t}),setTradeHistory:t=>e({tradeHistory:t}),addPendingOrder:t=>e(n=>({pendingOrders:[...n.pendingOrders,t]})),removePendingOrder:t=>e(n=>({pendingOrders:n.pendingOrders.filter(o=>o.id!==t)})),transactions:[],transactionSummary:null,setTransactions:t=>e({transactions:t}),setTransactionSummary:t=>e({transactionSummary:t}),addTransaction:t=>e(n=>({transactions:[t,...n.transactions]})),autoInvestStrategies:[],activeStrategies:[],setAutoInvestStrategies:t=>e({autoInvestStrategies:t}),addStrategy:t=>e(n=>({autoInvestStrategies:[...n.autoInvestStrategies,t]})),updateStrategy:(t,n)=>e(o=>({autoInvestStrategies:o.autoInvestStrategies.map(i=>i.id===t?{...i,...n}:i)})),removeStrategy:t=>e(n=>({autoInvestStrategies:n.autoInvestStrategies.filter(o=>o.id!==t)})),toggleStrategy:t=>e(n=>({autoInvestStrategies:n.autoInvestStrategies.map(o=>o.id===t?{...o,isActive:!o.isActive}:o)})),settings:{theme:"light",currency:"INR",notifications:{email:!0,push:!0,sms:!1},trading:{confirmBeforeTrade:!0,maxTradeAmount:1e5,paperTradingMode:!0}},setSettings:t=>e({settings:t}),updateSettings:t=>e(n=>({settings:{...n.settings,...t}})),updateNotificationSettings:t=>e(n=>({settings:{...n.settings,notifications:{...n.settings.notifications,...t}}})),updateTradingSettings:t=>e(n=>({settings:{...n.settings,trading:{...n.settings.trading,...t}}})),ui:{isLoading:!1,isSidebarOpen:!0,activeModal:null,notifications:[]},setLoading:t=>e(n=>({ui:{...n.ui,isLoading:t}})),toggleSidebar:()=>e(t=>({ui:{...t.ui,isSidebarOpen:!t.ui.isSidebarOpen}})),openModal:t=>e(n=>({ui:{...n.ui,activeModal:t}})),closeModal:()=>e(t=>({ui:{...t.ui,activeModal:null}})),addNotification:t=>e(n=>({ui:{...n.ui,notifications:[...n.ui.notifications,{...t,id:Date.now()}]}})),removeNotification:t=>e(n=>({ui:{...n.ui,notifications:n.ui.notifications.filter(o=>o.id!==t)}})),clearNotifications:()=>e(t=>({ui:{...t.ui,notifications:[]}})),lastUpdate:null,setLastUpdate:()=>e({lastUpdate:new Date().toISOString()}),resetStore:()=>e({user:null,isAuthenticated:!1,portfolio:null,portfolioSummary:null,connectedPlatforms:[],marketData:{indices:[],topGainers:[],topLosers:[],sectorPerformance:[]},investments:{mutualFunds:[],stocks:[],crypto:[]},aiInsights:null,aiRecommendations:[],riskAnalysis:null,pendingOrders:[],tradeHistory:[],transactions:[],transactionSummary:null,autoInvestStrategies:[],lastUpdate:null})}),{name:"spark-investment-store",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,settings:e.settings})})));export{B as u};
//# sourceMappingURL=useStore-Cvt2HlRy.js.map
