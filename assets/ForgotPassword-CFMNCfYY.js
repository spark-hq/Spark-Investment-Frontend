import{j as e}from"./data-vendor-m194QmGP.js";import{u as H,r as i,L as j}from"./react-router-CRup_Xac.js";import{u as J}from"./index-DlljZSOo.js";import{v as K,b as Q,f as U}from"./validation-D_gjHRZT.js";import{S as W,V as m,g as X,aF as y,y as C,aA as k,aE as z,az as V,Y as F}from"./icons-C7Hv1O-7.js";import"./react-vendor-Bzgz95E1.js";const ae=()=>{const v=H(),{sendOTP:N,resetPassword:R,isAuthenticated:P}=J(),[n,u]=i.useState(1),T=4,[r,E]=i.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[t,o]=i.useState({}),[l,p]=i.useState({}),[b,A]=i.useState(!1),[g,B]=i.useState(!1),[c,x]=i.useState(!1),[d,w]=i.useState(0);i.useEffect(()=>{P&&v("/dashboard",{replace:!0})},[P,v]),i.useEffect(()=>{if(d>0){const s=setTimeout(()=>w(d-1),1e3);return()=>clearTimeout(s)}},[d]);const f=s=>{const{name:a,value:q}=s.target;E(G=>({...G,[a]:q}))},h=s=>{p(a=>({...a,[s]:!0}))},O=()=>{const s=K(r.email);return o({email:s.error}),p({email:!0}),s.isValid},D=()=>{const s=Q(r.otp);return o({otp:s.error}),p({otp:!0}),s.isValid},$=()=>{const s=U(r.newPassword),a=r.newPassword===r.confirmPassword?{isValid:!0,error:""}:{isValid:!1,error:"Passwords do not match"};return o({newPassword:s.error,confirmPassword:a.error}),p({newPassword:!0,confirmPassword:!0}),s.isValid&&a.isValid},I=async s=>{if(s.preventDefault(),!!O()){x(!0),o({});try{const a=await N(r.email);a.success?(u(2),w(60)):o({form:a.error||"Failed to send OTP. Please try again."})}catch{o({form:"An unexpected error occurred. Please try again."})}finally{x(!1)}}},L=async()=>{if(d>0)return;x(!0);const s=await N(r.email);x(!1),s.success?(w(60),o({})):o({form:s.error||"Failed to resend OTP. Please try again."})},M=s=>{s.preventDefault(),D()&&(u(3),o({}))},Y=async s=>{if(s.preventDefault(),!!$()){x(!0),o({});try{const a=await R(r.email,r.newPassword,r.otp);a.success?u(4):o({form:a.error||"Failed to reset password. Please try again."})}catch{o({form:"An unexpected error occurred. Please try again."})}finally{x(!1)}}},S=()=>{u(s=>Math.max(s-1,1)),o({})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(j,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-3 rounded-xl shadow-lg",children:e.jsx(W,{className:"text-white",size:28})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Spark Investment"})]}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:n===4?"Password Reset Successful":"Reset Password"}),e.jsxs("p",{className:"text-gray-600",children:[n===1&&"Enter your email to receive a verification code",n===2&&"Enter the verification code sent to your email",n===3&&"Create a new password for your account",n===4&&"Your password has been reset successfully"]})]}),n<4&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-between mb-2",children:[1,2,3].map(s=>e.jsx("div",{className:`flex-1 h-2 mx-1 rounded-full transition-all ${s<=n?"bg-indigo-600":"bg-gray-200"}`},s))}),e.jsxs("div",{className:"text-center text-sm font-semibold text-gray-600",children:["Step ",n," of ",T-1]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-gray-100 p-8",children:[t.form&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-start space-x-3",children:[e.jsx(m,{className:"text-red-600 flex-shrink-0 mt-0.5",size:20}),e.jsx("p",{className:"text-sm text-red-800 font-medium",children:t.form})]}),n===1&&e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(X,{className:"text-gray-400",size:20})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:r.email,onChange:f,onBlur:()=>h("email"),className:`block w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${t.email&&l.email?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-200 focus:border-indigo-500 focus:ring-indigo-200"}`,placeholder:"you@example.com"})]}),t.email&&l.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(m,{size:14}),e.jsx("span",{children:t.email})]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 group",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Send Verification Code"}),e.jsx(y,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})}),e.jsx("div",{className:"text-center",children:e.jsx(j,{to:"/login",className:"text-sm font-semibold text-indigo-600 hover:text-indigo-700 transition-colors",children:"Back to Sign In"})})]}),n===2&&e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-semibold text-gray-700 mb-2 text-center",children:"Verification Code"}),e.jsxs("p",{className:"text-sm text-gray-600 text-center mb-4",children:["Code sent to ",e.jsx("strong",{children:r.email})]}),e.jsx("input",{id:"otp",name:"otp",type:"text",inputMode:"numeric",maxLength:"6",value:r.otp,onChange:f,onBlur:()=>h("otp"),className:`block w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all text-center text-2xl font-bold tracking-widest ${t.otp&&l.otp?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-200 focus:border-indigo-500 focus:ring-indigo-200"}`,placeholder:"000000"}),t.otp&&l.otp&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center justify-center space-x-1",children:[e.jsx(m,{size:14}),e.jsx("span",{children:t.otp})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:L,disabled:d>0||c,className:"text-sm font-semibold text-indigo-600 hover:text-indigo-700 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors",children:d>0?`Resend code in ${d}s`:"Resend code"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:S,className:"flex items-center space-x-2 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-50 transition-all",children:[e.jsx(C,{size:20}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{type:"submit",disabled:c,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 group",children:[e.jsx("span",{children:"Verify Code"}),e.jsx(y,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-blue-800 text-center",children:[e.jsx("strong",{children:"Demo Mode:"})," Check console for the OTP code"]})})]}),n===3&&e.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(k,{className:"text-gray-400",size:20})}),e.jsx("input",{id:"newPassword",name:"newPassword",type:b?"text":"password",value:r.newPassword,onChange:f,onBlur:()=>h("newPassword"),className:`block w-full pl-12 pr-12 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${t.newPassword&&l.newPassword?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-200 focus:border-indigo-500 focus:ring-indigo-200"}`,placeholder:"Create a strong password"}),e.jsx("button",{type:"button",onClick:()=>A(!b),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:b?e.jsx(z,{size:20}):e.jsx(V,{size:20})})]}),t.newPassword&&l.newPassword&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(m,{size:14}),e.jsx("span",{children:t.newPassword})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(k,{className:"text-gray-400",size:20})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:g?"text":"password",value:r.confirmPassword,onChange:f,onBlur:()=>h("confirmPassword"),className:`block w-full pl-12 pr-12 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${t.confirmPassword&&l.confirmPassword?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-200 focus:border-indigo-500 focus:ring-indigo-200"}`,placeholder:"Re-enter your password"}),e.jsx("button",{type:"button",onClick:()=>B(!g),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:g?e.jsx(z,{size:20}):e.jsx(V,{size:20})})]}),t.confirmPassword&&l.confirmPassword&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(m,{size:14}),e.jsx("span",{children:t.confirmPassword})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:S,className:"flex items-center space-x-2 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-50 transition-all",children:[e.jsx(C,{size:20}),e.jsx("span",{children:"Back"})]}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Resetting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Reset Password"}),e.jsx(F,{size:20})]})})]})]}),n===4&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-green-100 p-4 rounded-full",children:e.jsx(F,{className:"text-green-600",size:64})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Password Reset Complete!"}),e.jsx("p",{className:"text-gray-600",children:"Your password has been successfully reset. You can now sign in with your new password."})]}),e.jsxs(j,{to:"/login",className:"inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-8 rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl group",children:[e.jsx("span",{children:"Sign In Now"}),e.jsx(y,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]})]})})};export{ae as default};
//# sourceMappingURL=ForgotPassword-CFMNCfYY.js.map
