{"version":3,"file":"Signup-DAVR7FF3.js","sources":["../../src/pages/auth/Signup.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Eye,\r\n  EyeOff,\r\n  Mail,\r\n  Lock,\r\n  User,\r\n  Phone,\r\n  Calendar,\r\n  Target,\r\n  Clock,\r\n  CheckCircle2,\r\n  ArrowRight,\r\n  ArrowLeft,\r\n  Sparkles,\r\n  AlertCircle,\r\n  TrendingUp,\r\n  Shield,\r\n  Zap,\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport {\r\n  validateEmail,\r\n  validatePassword,\r\n  validateConfirmPassword,\r\n  validateName,\r\n  validatePhone,\r\n  validateDOB,\r\n  validateOTP,\r\n  getPasswordStrength,\r\n} from '../../utils/validation';\r\n\r\nconst Signup = () => {\r\n  const navigate = useNavigate();\r\n  const { signup, sendOTP, verifyOTP, isAuthenticated } = useAuth();\r\n\r\n  // Multi-step state\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const totalSteps = 4;\r\n\r\n  // Form data\r\n  const [formData, setFormData] = useState({\r\n    // Step 1: Basic Info\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    // Step 2: KYC-lite\r\n    phone: '',\r\n    dob: '',\r\n    // Step 3: Risk Profile\r\n    riskAppetite: 'moderate',\r\n    investmentHorizon: 'medium',\r\n    // Step 4: Verification\r\n    otp: '',\r\n    agreeToTerms: false,\r\n  });\r\n\r\n  // Errors state\r\n  const [errors, setErrors] = useState({});\r\n  const [touched, setTouched] = useState({});\r\n\r\n  // UI state\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [resendTimer, setResendTimer] = useState(0);\r\n\r\n  // Redirect if already authenticated\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      navigate('/dashboard', { replace: true });\r\n    }\r\n  }, [isAuthenticated, navigate]);\r\n\r\n  // Resend OTP timer\r\n  useEffect(() => {\r\n    if (resendTimer > 0) {\r\n      const timer = setTimeout(() => setResendTimer(resendTimer - 1), 1000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [resendTimer]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleBlur = (field) => {\r\n    setTouched((prev) => ({ ...prev, [field]: true }));\r\n  };\r\n\r\n  // Step 1 validation\r\n  const validateStep1 = () => {\r\n    const nameValidation = validateName(formData.name);\r\n    const emailValidation = validateEmail(formData.email);\r\n    const passwordValidation = validatePassword(formData.password);\r\n    const confirmPasswordValidation = validateConfirmPassword(formData.password, formData.confirmPassword);\r\n\r\n    const stepErrors = {\r\n      name: nameValidation.error,\r\n      email: emailValidation.error,\r\n      password: passwordValidation.error,\r\n      confirmPassword: confirmPasswordValidation.error,\r\n    };\r\n\r\n    setErrors(stepErrors);\r\n    setTouched({\r\n      name: true,\r\n      email: true,\r\n      password: true,\r\n      confirmPassword: true,\r\n    });\r\n\r\n    return (\r\n      nameValidation.isValid &&\r\n      emailValidation.isValid &&\r\n      passwordValidation.isValid &&\r\n      confirmPasswordValidation.isValid\r\n    );\r\n  };\r\n\r\n  // Step 2 validation\r\n  const validateStep2 = () => {\r\n    const phoneValidation = validatePhone(formData.phone);\r\n    const dobValidation = validateDOB(formData.dob);\r\n\r\n    const stepErrors = {\r\n      phone: phoneValidation.error,\r\n      dob: dobValidation.error,\r\n    };\r\n\r\n    setErrors(stepErrors);\r\n    setTouched({\r\n      phone: true,\r\n      dob: true,\r\n    });\r\n\r\n    return phoneValidation.isValid && dobValidation.isValid;\r\n  };\r\n\r\n  // Step 3 validation\r\n  const validateStep3 = () => {\r\n    // Risk profile has default values, so always valid\r\n    return true;\r\n  };\r\n\r\n  // Step 4 validation\r\n  const validateStep4 = () => {\r\n    const otpValidation = validateOTP(formData.otp);\r\n\r\n    const stepErrors = {\r\n      otp: otpValidation.error,\r\n      agreeToTerms: formData.agreeToTerms ? '' : 'You must accept the terms and conditions',\r\n    };\r\n\r\n    setErrors(stepErrors);\r\n    setTouched({\r\n      otp: true,\r\n      agreeToTerms: true,\r\n    });\r\n\r\n    return otpValidation.isValid && formData.agreeToTerms;\r\n  };\r\n\r\n  const handleNext = async () => {\r\n    let isValid = false;\r\n\r\n    switch (currentStep) {\r\n      case 1:\r\n        isValid = validateStep1();\r\n        break;\r\n      case 2:\r\n        isValid = validateStep2();\r\n        break;\r\n      case 3:\r\n        isValid = validateStep3();\r\n        // Send OTP when moving to step 4\r\n        if (isValid && !otpSent) {\r\n          setIsSubmitting(true);\r\n          const result = await sendOTP(formData.email);\r\n          setIsSubmitting(false);\r\n          if (result.success) {\r\n            setOtpSent(true);\r\n            setResendTimer(60); // 60 second cooldown\r\n          } else {\r\n            setErrors({ form: result.error || 'Failed to send OTP. Please try again.' });\r\n            return;\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        isValid = true;\r\n    }\r\n\r\n    if (isValid) {\r\n      setCurrentStep((prev) => Math.min(prev + 1, totalSteps));\r\n      setErrors({});\r\n      setTouched({});\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setCurrentStep((prev) => Math.max(prev - 1, 1));\r\n    setErrors({});\r\n  };\r\n\r\n  const handleResendOTP = async () => {\r\n    if (resendTimer > 0) return;\r\n\r\n    setIsSubmitting(true);\r\n    const result = await sendOTP(formData.email);\r\n    setIsSubmitting(false);\r\n\r\n    if (result.success) {\r\n      setResendTimer(60);\r\n      setErrors({});\r\n    } else {\r\n      setErrors({ form: result.error || 'Failed to resend OTP. Please try again.' });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateStep4()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Verify OTP first\r\n      const otpResult = await verifyOTP(formData.email, formData.otp);\r\n\r\n      if (!otpResult.success) {\r\n        setErrors({ otp: otpResult.error || 'Invalid OTP. Please try again.' });\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      // Create account\r\n      const signupData = {\r\n        name: formData.name,\r\n        email: formData.email,\r\n        password: formData.password,\r\n        phone: formData.phone,\r\n        dob: formData.dob,\r\n        riskProfile: {\r\n          appetite: formData.riskAppetite,\r\n          horizon: formData.investmentHorizon,\r\n        },\r\n      };\r\n\r\n      const result = await signup(signupData);\r\n\r\n      if (result.success) {\r\n        // Redirect to dashboard\r\n        navigate('/dashboard', { replace: true });\r\n      } else {\r\n        setErrors({ form: result.error || 'Signup failed. Please try again.' });\r\n      }\r\n    } catch (error) {\r\n      setErrors({ form: 'An unexpected error occurred. Please try again.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Progress bar\r\n  const progress = (currentStep / totalSteps) * 100;\r\n\r\n  // Password strength indicator\r\n  const passwordStrength = getPasswordStrength(formData.password);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-2xl w-full\">\r\n        {/* Header */}\r\n        <div className=\"text-center mb-8\">\r\n          <Link\r\n            to=\"/\"\r\n            className=\"inline-flex items-center justify-center space-x-2 mb-6\"\r\n            aria-label=\"Go to Spark Investment homepage\"\r\n          >\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 p-3 rounded-xl shadow-lg\" aria-hidden=\"true\">\r\n              <Sparkles className=\"text-white\" size={28} />\r\n            </div>\r\n            <span className=\"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent\">\r\n              Spark Investment\r\n            </span>\r\n          </Link>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Create Your Account</h1>\r\n          <p className=\"text-gray-600\">Start your investment journey with AI-powered insights</p>\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        <div className=\"mb-8\" role=\"progressbar\" aria-valuenow={currentStep} aria-valuemin=\"1\" aria-valuemax={totalSteps} aria-label={`Signup progress: Step ${currentStep} of ${totalSteps}`}>\r\n          <div className=\"flex justify-between mb-3\">\r\n            {[1, 2, 3, 4].map((step) => (\r\n              <div key={step} className=\"flex items-center\">\r\n                <div\r\n                  className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm transition-all ${\r\n                    step < currentStep\r\n                      ? 'bg-green-500 text-white'\r\n                      : step === currentStep\r\n                      ? 'bg-indigo-600 text-white ring-4 ring-indigo-200'\r\n                      : 'bg-gray-200 text-gray-500'\r\n                  }`}\r\n                  aria-label={`Step ${step}: ${step < currentStep ? 'Completed' : step === currentStep ? 'Current' : 'Not started'}`}\r\n                  aria-current={step === currentStep ? 'step' : undefined}\r\n                >\r\n                  {step < currentStep ? <CheckCircle2 size={20} aria-hidden=\"true\" /> : step}\r\n                </div>\r\n                {step < 4 && (\r\n                  <div\r\n                    className={`w-16 sm:w-24 h-1 mx-2 transition-all ${\r\n                      step < currentStep ? 'bg-green-500' : 'bg-gray-200'\r\n                    }`}\r\n                    aria-hidden=\"true\"\r\n                  ></div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"text-center text-sm font-semibold text-gray-600\" aria-live=\"polite\">\r\n            Step {currentStep} of {totalSteps}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Signup Form */}\r\n        <div className=\"bg-white rounded-2xl shadow-xl border-2 border-gray-100 p-8\">\r\n          <form onSubmit={handleSubmit} aria-label=\"Multi-step signup form\">\r\n            {/* Form Error */}\r\n            {errors.form && (\r\n              <div className=\"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-start space-x-3\" role=\"alert\" aria-live=\"polite\" aria-atomic=\"true\">\r\n                <AlertCircle className=\"text-red-600 flex-shrink-0 mt-0.5\" size={20} aria-hidden=\"true\" />\r\n                <p className=\"text-sm text-red-800 font-medium\">{errors.form}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 1: Basic Information */}\r\n            {currentStep === 1 && (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"text-center mb-6\">\r\n                  <h3 className=\"text-xl font-bold text-gray-900\">Basic Information</h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">Let's start with your details</p>\r\n                </div>\r\n\r\n                {/* Name */}\r\n                <div>\r\n                  <label htmlFor=\"name\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                    Full Name\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                      <User className=\"text-gray-400\" size={20} />\r\n                    </div>\r\n                    <input\r\n                      id=\"name\"\r\n                      name=\"name\"\r\n                      type=\"text\"\r\n                      value={formData.name}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('name')}\r\n                      className={`block w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${\r\n                        errors.name && touched.name\r\n                          ? 'border-red-300 focus:border-red-500 focus:ring-red-200'\r\n                          : 'border-gray-200 focus:border-indigo-500 focus:ring-indigo-200'\r\n                      }`}\r\n                      placeholder=\"John Doe\"\r\n                    />\r\n                  </div>\r\n                  {errors.name && touched.name && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.name}</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Email */}\r\n                <div>\r\n                  <label htmlFor=\"email\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                    Email Address\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                      <Mail className=\"text-gray-400\" size={20} />\r\n                    </div>\r\n                    <input\r\n                      id=\"email\"\r\n                      name=\"email\"\r\n                      type=\"email\"\r\n                      value={formData.email}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('email')}\r\n                      className={`block w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${\r\n                        errors.email && touched.email\r\n                          ? 'border-red-300 focus:border-red-500 focus:ring-red-200'\r\n                          : 'border-gray-200 focus:border-indigo-500 focus:ring-indigo-200'\r\n                      }`}\r\n                      placeholder=\"you@example.com\"\r\n                    />\r\n                  </div>\r\n                  {errors.email && touched.email && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.email}</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Password */}\r\n                <div>\r\n                  <label htmlFor=\"password\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                    Password\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                      <Lock className=\"text-gray-400\" size={20} />\r\n                    </div>\r\n                    <input\r\n                      id=\"password\"\r\n                      name=\"password\"\r\n                      type={showPassword ? 'text' : 'password'}\r\n                      value={formData.password}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('password')}\r\n                      className={`block w-full pl-12 pr-12 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${\r\n                        errors.password && touched.password\r\n                          ? 'border-red-300 focus:border-red-500 focus:ring-red-200'\r\n                          : 'border-gray-200 focus:border-indigo-500 focus:ring-indigo-200'\r\n                      }`}\r\n                      placeholder=\"Create a strong password\"\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPassword(!showPassword)}\r\n                      className=\"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors\"\r\n                    >\r\n                      {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n                    </button>\r\n                  </div>\r\n                  {/* Password Strength Indicator */}\r\n                  {formData.password && (\r\n                    <div className=\"mt-2\">\r\n                      <div className=\"flex items-center justify-between mb-1\">\r\n                        <span className=\"text-xs font-medium text-gray-600\">Password Strength:</span>\r\n                        <span\r\n                          className={`text-xs font-bold ${\r\n                            passwordStrength.color === 'green'\r\n                              ? 'text-green-600'\r\n                              : passwordStrength.color === 'yellow'\r\n                              ? 'text-yellow-600'\r\n                              : 'text-red-600'\r\n                          }`}\r\n                        >\r\n                          {passwordStrength.strength}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n                        <div\r\n                          className={`h-full transition-all duration-300 ${\r\n                            passwordStrength.color === 'green'\r\n                              ? 'bg-green-500'\r\n                              : passwordStrength.color === 'yellow'\r\n                              ? 'bg-yellow-500'\r\n                              : 'bg-red-500'\r\n                          }`}\r\n                          style={{ width: `${passwordStrength.percentage}%` }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {errors.password && touched.password && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.password}</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Confirm Password */}\r\n                <div>\r\n                  <label htmlFor=\"confirmPassword\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                    Confirm Password\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                      <Lock className=\"text-gray-400\" size={20} />\r\n                    </div>\r\n                    <input\r\n                      id=\"confirmPassword\"\r\n                      name=\"confirmPassword\"\r\n                      type={showConfirmPassword ? 'text' : 'password'}\r\n                      value={formData.confirmPassword}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('confirmPassword')}\r\n                      className={`block w-full pl-12 pr-12 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${\r\n                        errors.confirmPassword && touched.confirmPassword\r\n                          ? 'border-red-300 focus:border-red-500 focus:ring-red-200'\r\n                          : 'border-gray-200 focus:border-indigo-500 focus:ring-indigo-200'\r\n                      }`}\r\n                      placeholder=\"Re-enter your password\"\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                      className=\"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors\"\r\n                    >\r\n                      {showConfirmPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n                    </button>\r\n                  </div>\r\n                  {errors.confirmPassword && touched.confirmPassword && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.confirmPassword}</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 2: KYC-lite Information */}\r\n            {currentStep === 2 && (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"text-center mb-6\">\r\n                  <h3 className=\"text-xl font-bold text-gray-900\">KYC Information</h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">Required for trading and compliance</p>\r\n                </div>\r\n\r\n                {/* Phone */}\r\n                <div>\r\n                  <label htmlFor=\"phone\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                    Phone Number\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                      <Phone className=\"text-gray-400\" size={20} />\r\n                    </div>\r\n                    <input\r\n                      id=\"phone\"\r\n                      name=\"phone\"\r\n                      type=\"tel\"\r\n                      value={formData.phone}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('phone')}\r\n                      className={`block w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${\r\n                        errors.phone && touched.phone\r\n                          ? 'border-red-300 focus:border-red-500 focus:ring-red-200'\r\n                          : 'border-gray-200 focus:border-indigo-500 focus:ring-indigo-200'\r\n                      }`}\r\n                      placeholder=\"+91 9876543210\"\r\n                    />\r\n                  </div>\r\n                  {errors.phone && touched.phone && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.phone}</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Date of Birth */}\r\n                <div>\r\n                  <label htmlFor=\"dob\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                    Date of Birth\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                      <Calendar className=\"text-gray-400\" size={20} />\r\n                    </div>\r\n                    <input\r\n                      id=\"dob\"\r\n                      name=\"dob\"\r\n                      type=\"date\"\r\n                      value={formData.dob}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('dob')}\r\n                      max={new Date().toISOString().split('T')[0]}\r\n                      className={`block w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${\r\n                        errors.dob && touched.dob\r\n                          ? 'border-red-300 focus:border-red-500 focus:ring-red-200'\r\n                          : 'border-gray-200 focus:border-indigo-500 focus:ring-indigo-200'\r\n                      }`}\r\n                    />\r\n                  </div>\r\n                  {errors.dob && touched.dob && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.dob}</span>\r\n                    </p>\r\n                  )}\r\n                  <p className=\"mt-2 text-xs text-gray-500\">You must be at least 18 years old to register</p>\r\n                </div>\r\n\r\n                {/* Info Box */}\r\n                <div className=\"bg-blue-50 border-2 border-blue-200 rounded-xl p-4\">\r\n                  <p className=\"text-sm text-blue-800\">\r\n                    <strong>Why do we need this?</strong> Phone and DOB are required for KYC compliance and to\r\n                    enable trading features.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 3: Risk Profile */}\r\n            {currentStep === 3 && (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"text-center mb-6\">\r\n                  <h3 className=\"text-xl font-bold text-gray-900\">Risk Profile</h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">Help us personalize your investment strategy</p>\r\n                </div>\r\n\r\n                {/* Risk Appetite */}\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n                    <Target className=\"inline mr-2\" size={18} />\r\n                    Risk Appetite\r\n                  </label>\r\n                  <div className=\"space-y-3\">\r\n                    {[\r\n                      {\r\n                        value: 'conservative',\r\n                        label: 'Conservative',\r\n                        description: 'Lower risk, stable returns',\r\n                        icon: Shield,\r\n                        color: 'green',\r\n                      },\r\n                      {\r\n                        value: 'moderate',\r\n                        label: 'Moderate',\r\n                        description: 'Balanced risk and returns',\r\n                        icon: TrendingUp,\r\n                        color: 'blue',\r\n                      },\r\n                      {\r\n                        value: 'aggressive',\r\n                        label: 'Aggressive',\r\n                        description: 'Higher risk, potential for higher returns',\r\n                        icon: Zap,\r\n                        color: 'red',\r\n                      },\r\n                    ].map((option) => {\r\n                      const Icon = option.icon;\r\n                      return (\r\n                        <label\r\n                          key={option.value}\r\n                          className={`flex items-start space-x-4 p-4 border-2 rounded-xl cursor-pointer transition-all hover:shadow-md ${\r\n                            formData.riskAppetite === option.value\r\n                              ? `border-${option.color}-500 bg-${option.color}-50`\r\n                              : 'border-gray-200 hover:border-gray-300'\r\n                          }`}\r\n                        >\r\n                          <input\r\n                            type=\"radio\"\r\n                            name=\"riskAppetite\"\r\n                            value={option.value}\r\n                            checked={formData.riskAppetite === option.value}\r\n                            onChange={handleInputChange}\r\n                            className=\"mt-1\"\r\n                          />\r\n                          <div className=\"flex-shrink-0\">\r\n                            <Icon\r\n                              className={\r\n                                formData.riskAppetite === option.value\r\n                                  ? `text-${option.color}-600`\r\n                                  : 'text-gray-400'\r\n                              }\r\n                              size={24}\r\n                            />\r\n                          </div>\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"font-bold text-gray-900\">{option.label}</div>\r\n                            <div className=\"text-sm text-gray-600\">{option.description}</div>\r\n                          </div>\r\n                        </label>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Investment Horizon */}\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n                    <Clock className=\"inline mr-2\" size={18} />\r\n                    Investment Horizon\r\n                  </label>\r\n                  <div className=\"space-y-3\">\r\n                    {[\r\n                      { value: 'short', label: 'Short-term (< 1 year)', description: 'Quick returns' },\r\n                      { value: 'medium', label: 'Medium-term (1-5 years)', description: 'Balanced growth' },\r\n                      { value: 'long', label: 'Long-term (5+ years)', description: 'Wealth building' },\r\n                    ].map((option) => (\r\n                      <label\r\n                        key={option.value}\r\n                        className={`flex items-start space-x-4 p-4 border-2 rounded-xl cursor-pointer transition-all hover:shadow-md ${\r\n                          formData.investmentHorizon === option.value\r\n                            ? 'border-indigo-500 bg-indigo-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                      >\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"investmentHorizon\"\r\n                          value={option.value}\r\n                          checked={formData.investmentHorizon === option.value}\r\n                          onChange={handleInputChange}\r\n                          className=\"mt-1\"\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"font-bold text-gray-900\">{option.label}</div>\r\n                          <div className=\"text-sm text-gray-600\">{option.description}</div>\r\n                        </div>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 4: Verification */}\r\n            {currentStep === 4 && (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"text-center mb-6\">\r\n                  <h3 className=\"text-xl font-bold text-gray-900\">Verify Your Email</h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">\r\n                    We've sent a 6-digit code to <strong>{formData.email}</strong>\r\n                  </p>\r\n                </div>\r\n\r\n                {/* OTP Input */}\r\n                <div>\r\n                  <label htmlFor=\"otp\" className=\"block text-sm font-semibold text-gray-700 mb-2 text-center\">\r\n                    Enter OTP\r\n                  </label>\r\n                  <input\r\n                    id=\"otp\"\r\n                    name=\"otp\"\r\n                    type=\"text\"\r\n                    inputMode=\"numeric\"\r\n                    maxLength=\"6\"\r\n                    value={formData.otp}\r\n                    onChange={handleInputChange}\r\n                    onBlur={() => handleBlur('otp')}\r\n                    className={`block w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all text-center text-2xl font-bold tracking-widest ${\r\n                      errors.otp && touched.otp\r\n                        ? 'border-red-300 focus:border-red-500 focus:ring-red-200'\r\n                        : 'border-gray-200 focus:border-indigo-500 focus:ring-indigo-200'\r\n                    }`}\r\n                    placeholder=\"000000\"\r\n                  />\r\n                  {errors.otp && touched.otp && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center justify-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.otp}</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Resend OTP */}\r\n                <div className=\"text-center\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleResendOTP}\r\n                    disabled={resendTimer > 0 || isSubmitting}\r\n                    className=\"text-sm font-semibold text-indigo-600 hover:text-indigo-700 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors\"\r\n                  >\r\n                    {resendTimer > 0 ? `Resend OTP in ${resendTimer}s` : 'Resend OTP'}\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Terms and Conditions */}\r\n                <div className=\"border-t-2 border-gray-200 pt-6\">\r\n                  <label className=\"flex items-start space-x-3 cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      name=\"agreeToTerms\"\r\n                      checked={formData.agreeToTerms}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('agreeToTerms')}\r\n                      className={`mt-1 h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-2 rounded cursor-pointer ${\r\n                        errors.agreeToTerms && touched.agreeToTerms ? 'border-red-500' : 'border-gray-300'\r\n                      }`}\r\n                    />\r\n                    <span className=\"text-sm text-gray-700\">\r\n                      I agree to the{' '}\r\n                      <Link to=\"/terms\" className=\"text-indigo-600 hover:text-indigo-700 font-semibold\">\r\n                        Terms of Service\r\n                      </Link>{' '}\r\n                      and{' '}\r\n                      <Link to=\"/privacy\" className=\"text-indigo-600 hover:text-indigo-700 font-semibold\">\r\n                        Privacy Policy\r\n                      </Link>\r\n                    </span>\r\n                  </label>\r\n                  {errors.agreeToTerms && touched.agreeToTerms && (\r\n                    <p className=\"mt-2 text-sm text-red-600 flex items-center space-x-1\">\r\n                      <AlertCircle size={14} />\r\n                      <span>{errors.agreeToTerms}</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Demo Info */}\r\n                <div className=\"bg-blue-50 border-2 border-blue-200 rounded-xl p-4\">\r\n                  <p className=\"text-sm text-blue-800 text-center\">\r\n                    <strong>Demo Mode:</strong> Check console for the OTP code\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Navigation Buttons */}\r\n            <div className=\"mt-8 flex items-center justify-between space-x-4\">\r\n              {currentStep > 1 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleBack}\r\n                  className=\"flex items-center space-x-2 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-50 transition-all\"\r\n                >\r\n                  <ArrowLeft size={20} />\r\n                  <span>Back</span>\r\n                </button>\r\n              )}\r\n\r\n              {currentStep < totalSteps ? (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleNext}\r\n                  disabled={isSubmitting}\r\n                  className=\"flex-1 flex items-center justify-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed group\"\r\n                >\r\n                  {isSubmitting ? (\r\n                    <>\r\n                      <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                      <span>Processing...</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <span>Continue</span>\r\n                      <ArrowRight size={20} className=\"group-hover:translate-x-1 transition-transform\" />\r\n                    </>\r\n                  )}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={isSubmitting}\r\n                  className=\"flex-1 flex items-center justify-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {isSubmitting ? (\r\n                    <>\r\n                      <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                      <span>Creating Account...</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <CheckCircle2 size={20} />\r\n                      <span>Create Account</span>\r\n                    </>\r\n                  )}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        {/* Login Link */}\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            Already have an account?{' '}\r\n            <Link to=\"/login\" className=\"font-semibold text-indigo-600 hover:text-indigo-700 transition-colors\">\r\n              Sign In\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n"],"names":["Signup","navigate","useNavigate","signup","sendOTP","verifyOTP","isAuthenticated","useAuth","currentStep","setCurrentStep","useState","totalSteps","formData","setFormData","errors","setErrors","touched","setTouched","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","isSubmitting","setIsSubmitting","otpSent","setOtpSent","resendTimer","setResendTimer","useEffect","timer","handleInputChange","e","name","value","type","checked","prev","handleBlur","field","validateStep1","nameValidation","validateName","emailValidation","validateEmail","passwordValidation","validatePassword","confirmPasswordValidation","validateConfirmPassword","stepErrors","validateStep2","phoneValidation","validatePhone","dobValidation","validateDOB","validateStep3","validateStep4","otpValidation","validateOTP","handleNext","isValid","result","handleBack","handleResendOTP","handleSubmit","otpResult","signupData","passwordStrength","getPasswordStrength","jsxs","Link","jsx","Sparkles","step","CheckCircle2","AlertCircle","User","Mail","Lock","EyeOff","Eye","Phone","Calendar","Target","Shield","TrendingUp","Zap","option","Icon","Clock","ArrowLeft","Fragment","ArrowRight"],"mappings":"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"}